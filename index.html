<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Jeu du Pendu</title>
    <link rel="icon" type="image/svg+xml" href="../../favicon.svg">
    <script src="version.js"></script>
    <script src=".dev-config.js" onerror="console.log('📋 .dev-config.js non trouvé - utilisation config par défaut')"></script>
    <!-- CSS modulaire (version automatique via version.js) -->
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/views.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <link rel="stylesheet" href="styles/modal.css">
    <link rel="stylesheet" href="styles/game-header.css">
    <link rel="stylesheet" href="styles/virtual-keyboard.css">
</head>
<body>
    <!-- Header avec menu hamburger -->
    <header class="app-header">
        <div class="header-content">
            <div class="header-actions">
                <button class="header-btn" id="fullscreenHeaderBtn" title="Plein écran">🖼️</button>
                <button class="header-btn" id="restartGameHeaderBtn" title="Recommencer la partie">🔄</button>
                <button class="header-btn header-btn-next" id="nextWordHeaderBtn" title="Passer au mot suivant" style="display: none;">⏭️</button>
            </div>
            <button class="hamburger-menu" id="hamburgerMenu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        
        <!-- Menu de navigation -->
        <nav class="nav-menu" id="navMenu">
            <ul>
                <li><a href="#" data-view="menu" class="nav-link active">🏠 Accueil</a></li>
                <li><a href="#" data-view="stats" class="nav-link">📊 Statistiques</a></li>
                <li class="nav-separator"></li>
                <li><a href="#" data-view="changelog" class="nav-link">📜 Nouveautés</a></li>
                <li><a href="#" data-view="settings" class="nav-link">⚙️ Paramètres</a></li>
                <li class="nav-separator"></li>
                <li><a href="admin.html" class="nav-link">🔧 Administration</a></li>
                <li><a href="../../index.html" class="nav-link">🕹️ Retour à la borne</a></li>
            </ul>
            <div class="nav-version">v<span id="versionDisplay">4.1.1</span></div>
        </nav>
    </header>
    
    <!-- Vue Menu Principal -->
    <div class="view active" id="menuView">
        <div class="container">
            <div class="menu-content">
                <div class="welcome-section">
                    <h2>Bienvenue dans le Pendu ! 🎯</h2>
                    <p id="welcomeDescription">Testez vos connaissances avec nos mots répartis en plusieurs catégories</p>
                </div>
                
                <div class="menu-actions">
                    <button class="btn btn-primary" id="startGameBtn">🎮 Commencer une partie</button>
                    <button class="btn btn-secondary" id="viewStatsBtn">📊 Voir mes statistiques</button>
                </div>
                
                <div class="quick-stats">
                    <div class="stat-card stat-card-left">
                        <div class="stat-info">
                            <span class="stat-number" id="totalFoundWords">0</span>
                            <span class="stat-label">Mots trouvés</span>
                        </div>
                        <div class="stat-icon">🎯</div>
                    </div>
                    <div class="stat-card stat-card-right">
                        <div class="stat-info">
                            <span class="stat-number" id="currentStreak">0</span>
                            <span class="stat-label">Série actuelle</span>
                        </div>
                        <div class="stat-icon">🔥</div>
                    </div>
                    <div class="stat-card stat-card-left">
                        <div class="stat-info">
                            <span class="stat-number" id="totalAchievements">0</span>
                            <span class="stat-label">Succès débloqués</span>
                        </div>
                        <div class="stat-icon">🏆</div>
                    </div>
                    <div class="stat-card stat-card-right">
                        <div class="stat-info">
                            <span class="stat-number" id="bestStreak">0</span>
                            <span class="stat-label">Meilleure série</span>
                        </div>
                        <div class="stat-icon">⭐</div>
                    </div>
                </div>
                
                <!-- Modal de sélection du mode de jeu -->
                <div class="modal" id="gameModeModal">
                    <div class="modal-content">
                        <h3>🎯 Choisissez votre mode de jeu</h3>
                        
                        
                        <div class="game-modes">
                            <div class="mode-card" data-mode="standard">
                                <div class="mode-icon">🎲</div>
                                <h4>Mode Standard</h4>
                                <p>Trouvez les mots à votre rythme</p>
                                <button class="btn btn-primary select-mode-btn" data-mode="standard">Jouer Standard</button>
                            </div>
                            
                            <div class="mode-card" data-mode="timeattack">
                                <div class="mode-icon">⏱️</div>
                                <h4>Time Attack</h4>
                                <p>Trouvez un maximum de mots avant la fin du chrono !</p>
                                <div class="time-options">
                                    <label>Durée :</label>
                                    <div class="time-buttons">
                                        <button class="time-btn active" data-time="1">1 min</button>
                                        <button class="time-btn" data-time="2">2 min</button>
                                        <button class="time-btn" data-time="3">3 min</button>
                                        <button class="time-btn" data-time="5">5 min</button>
                                    </div>
                                </div>
                                <div class="highscore-preview">
                                    <span>🏆 Record : <span id="timeAttackHighscore">--</span></span>
                                </div>
                                <button class="btn btn-primary select-mode-btn" data-mode="timeattack">Jouer Time Attack</button>
                            </div>
                            
                            <div class="mode-card" data-mode="category">
                                <div class="mode-icon">📚</div>
                                <h4>Mode Catégorie</h4>
                                <p>Tentez de deviner TOUS les mots d'une catégorie !</p>
                                <button class="btn btn-primary select-mode-btn" data-mode="category">Choisir une catégorie</button>
                            </div>
                        </div>
                        
                        <button class="btn btn-secondary close-modal-btn">❌ Annuler</button>
                    </div>
                </div>
                
                <!-- Modal de sélection de catégorie -->
                <div class="modal" id="categoryModal">
                    <div class="modal-content">
                        <h3>📚 Choisissez votre catégorie</h3>
                        <p>Tentez de deviner tous les mots de la catégorie sélectionnée !</p>
                        
                        <div class="categories-grid" id="categoriesGrid">
                            <!-- Les catégories seront générées dynamiquement -->
                        </div>
                        
                        <button class="btn btn-secondary close-category-modal-btn">❌ Retour</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Vue Jeu -->
    <div class="view" id="gameView">
        <div class="container">
            <div class="game-area">
                <div class="top-section">
                    <!-- Nouveau design minimaliste unifié -->
                    <div class="game-header-unified">
                        <div class="category-title">
                            <span class="category-icon">🎬</span>
                            <h2 id="categoryName">Catégorie</h2>
                        </div>
                        
                        <div class="game-stats-bar">
                            <!-- Progression -->
                            <div class="stat-group" data-tooltip="Mots trouvés">
                                <span class="stat-icon">📊</span>
                                <span id="wordsProgress">0/0</span>
                            </div>
                            
                            <!-- Série -->
                            <div class="stat-group" data-tooltip="Série actuelle">
                                <span class="stat-icon">🔥</span>
                                <span id="streakDisplay">0</span>
                            </div>
                            
                            <!-- Lettres essayées -->
                            <div class="stat-group" data-tooltip="Lettres essayées">
                                <span class="stat-icon">🔤</span>
                                <span id="wrongLetters">-</span>
                            </div>
                        </div>
                        
                        <!-- Time Attack Stats (cachées par défaut) -->
                        <div class="time-attack-bar hidden" id="timeAttackCard">
                            <div class="stat-group" data-tooltip="Temps restant">
                                <span class="stat-icon">⏱️</span>
                                <span id="timerDisplay">00:00</span>
                            </div>
                            <div class="stat-group" data-tooltip="Score actuel">
                                <span class="stat-icon">⭐</span>
                                <span id="scoreDisplay">0</span>
                            </div>
                            <div class="stat-group" data-tooltip="Meilleur score">
                                <span class="stat-icon">🏆</span>
                                <span id="currentHighscore">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Anciens boutons Passer supprimés - maintenant dans le header -->
                    
                    <div class="hangman-container">
                        <svg id="hangman" viewBox="0 0 250 300" preserveAspectRatio="xMidYMid meet">
                            <!-- Base -->
                            <line class="part" x1="10" y1="290" x2="150" y2="290" stroke="#666" stroke-width="4"/>
                            <!-- Poteau vertical -->
                            <line class="part" x1="50" y1="290" x2="50" y2="10" stroke="#666" stroke-width="4"/>
                            <!-- Poteau horizontal -->
                            <line class="part" x1="50" y1="10" x2="150" y2="10" stroke="#666" stroke-width="4"/>
                            <!-- Corde -->
                            <line class="part" x1="150" y1="10" x2="150" y2="60" stroke="#666" stroke-width="4"/>
                            <!-- Tête -->
                            <circle class="part body-part" cx="150" cy="80" r="20" stroke="#ff6b6b" stroke-width="3" fill="none"/>
                            <!-- Corps -->
                            <line class="part body-part" x1="150" y1="100" x2="150" y2="180" stroke="#ff6b6b" stroke-width="3"/>
                            <!-- Bras gauche -->
                            <line class="part body-part" x1="150" y1="130" x2="120" y2="150" stroke="#ff6b6b" stroke-width="3"/>
                            <!-- Bras droit -->
                            <line class="part body-part" x1="150" y1="130" x2="180" y2="150" stroke="#ff6b6b" stroke-width="3"/>
                            <!-- Jambe gauche -->
                            <line class="part body-part" x1="150" y1="180" x2="120" y2="220" stroke="#ff6b6b" stroke-width="3"/>
                            <!-- Jambe droite -->
                            <line class="part body-part" x1="150" y1="180" x2="180" y2="220" stroke="#ff6b6b" stroke-width="3"/>
                        </svg>
                    </div>
                </div>
                
                <div class="game-info">
                    <div class="word-display" id="wordDisplay"></div>
                </div>
            </div>
            
            <div class="keyboard" id="keyboard"></div>
            
            <!-- Anciens boutons Passer supprimés - maintenant dans le header -->
            
            <div id="gameMessage" class="game-message"></div>
        </div>
    </div>
    
    <!-- Vue Statistiques -->
    <div class="view" id="statsView">
        <div class="container">
            <div class="stats-content">
                <h2>📊 Mes Statistiques</h2>
                
                <div class="stats-overview">
                    <div class="big-stat-card">
                        <div class="big-stat-number" id="statsFoundWords">0</div>
                        <div class="big-stat-label">Mots trouvés</div>
                        <div class="big-stat-total" id="statsTotalWords">sur 0</div>
                    </div>
                    <div class="big-stat-card">
                        <div class="big-stat-number" id="statsBestStreak">0</div>
                        <div class="big-stat-label">Meilleure série</div>
                        <div class="big-stat-current">Actuelle: <span id="statsCurrentStreak">0</span></div>
                    </div>
                </div>
                
                <div class="achievements-section">
                    <h3>🏆 Succès débloqués</h3>
                    <div class="achievements-grid" id="achievementsGrid">
                        <!-- Les achievements seront générés dynamiquement -->
                    </div>
                </div>
                
                <div class="stats-actions">
                    <button class="btn btn-secondary" id="backToMenuFromStatsBtn">🏠 Retour au menu</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Vue Changelog -->
    <div class="view" id="changelogView">
        <div class="container">
            <div class="changelog-content">
                <h2>📜 Historique des Nouveautés</h2>
                
                <div class="changelog-intro">
                    <p>Découvrez toutes les évolutions et nouvelles fonctionnalités ajoutées au jeu du Pendu !</p>
                </div>
                
                <div class="changelog-timeline">
                    <div class="changelog-day">
                        <div class="day-header">
                            <span class="day-date">🗓️ 6 Août 2025</span>
                        </div>
                        <ul class="changelog-list">
                            <li>🚀 <strong>MIGRATION MYSQL COMPLÈTE</strong> : passage du JSON vers base de données MySQL avec API REST PHP - infrastructure moderne et scalable</li>
                            <li>🐳 <strong>Environnement Docker</strong> : MySQL 8.0 + PHP 8.1 Apache + PhpMyAdmin - déploiement simplifié avec docker-compose</li>
                            <li>⚙️ <strong>Interface d'administration</strong> : panneau admin complet pour gérer catégories, mots et tags via interface web</li>
                            <li>🌐 <strong>API REST professionnelle</strong> : endpoints standardisés avec gestion d'erreurs, CORS, validation et documentation intégrée</li>
                            <li>🔧 <strong>Correction champs database</strong> : harmonisation nom→name, icone→icon pour compatibilité avec les standards anglais</li>
                            <li>📊 <strong>Système de statistiques avancé</strong> : API dédiée aux stats avec métadonnées et historiques</li>
                            <li>🛡️ <strong>Sécurité renforcée</strong> : authentification admin, validation des données, protection contre injections SQL</li>
                            <li>🧹 <strong>Nettoyage interface</strong> : suppression des éléments inutiles (mode-features)</li>
                        </ul>
                    </div>
                    
                    <div class="changelog-day">
                        <div class="day-header">
                            <span class="day-date">🗓️ 5 Août 2025</span>
                        </div>
                        <ul class="changelog-list">
                            <li>⚙️ <strong>Page Paramètres complète</strong> : gestion centralisée de la difficulté et sélection des catégories actives</li>
                            <li>🎮 <strong>Bouton "Mot suivant"</strong> : contrôle manuel en modes Standard et Catégorie pour plus de flexibilité</li>
                            <li>📂 <strong>Sélection des catégories</strong> : choix personnalisé des catégories à inclure dans vos parties</li>
                            <li>🔄 <strong>Mode Catégorie amélioré</strong> : les mots réussis sont reproposés, les ratés sont éliminés définitivement</li>
                            <li>🧹 <strong>Migration difficulté</strong> : options déplacées de la modal vers la page Paramètres pour éviter la duplication</li>
                            <li>📱 <strong>Paramètres responsive</strong> : interface adaptée mobile avec grille et contrôles optimisés</li>
                            <li>🚀 <strong>Redémarrage intelligent</strong> : supprime uniquement la sauvegarde du mode actuel lors d'un restart</li>
                            <li>✨ <strong>Refonte complète des succès</strong> : présentation en 2x2 comme les cartes du menu, alternance des icônes</li>
                            <li>🎯 <strong>Navigation intelligente</strong> : bouton "Recommencer" visible uniquement en jeu</li>
                            <li>🏠 <strong>Menu → Accueil</strong> : renommage pour plus de clarté</li>
                            <li>🔤 <strong>Orthographe parfaite</strong> : ajout des accents manquants dans toutes les catégories</li>
                            <li>⚡ <strong>Code unifié</strong> : achievements utilisent maintenant les classes stat-card</li>
                            <li>📱 <strong>Interface mobile optimisée</strong> : layout 2x2 compact pour les cartes stats</li>
                            <li>🎨 <strong>Gestion des caractères spéciaux</strong> : chiffres et accents selon les options de difficulté</li>
                        </ul>
                    </div>
                    
                    <div class="changelog-day">
                        <div class="day-header">
                            <span class="day-date">🗓️ 4 Août 2025</span>
                        </div>
                        <ul class="changelog-list">
                            <li>🎮 <strong>3 Modes de jeu complets</strong> : Standard (progression), Time Attack (chrono), Mode Catégorie (complétion)</li>
                            <li>⏱️ <strong>Mode Time Attack</strong> : chrono 1-5min avec highscores sauvegardés par durée</li>
                            <li>📚 <strong>Mode Catégorie</strong> : défi de deviner TOUS les mots d'une catégorie sans limite d'erreurs</li>
                            <li>📱 <strong>Clavier virtuel professionnel</strong> : AZERTY mobile avec appuis longs pour accents français</li>
                            <li>🔧 <strong>Options de difficulté</strong> : "Accents requis" et "Chiffres cachés" pour corser le défi</li>
                            <li>🏰 <strong>Univers Harry Potter</strong> : 86 Personnages + 76 Lieux avec noms français complets</li>
                            <li>💾 <strong>Sauvegarde automatique</strong> : parties Standard conservées entre sessions</li>
                            <li>🏗️ <strong>Architecture ES6</strong> : refonte complète avec classes modulaires</li>
                            <li>🎯 <strong>Interface unifiée</strong> : header de jeu minimaliste avec stats temps réel</li>
                            <li>📊 <strong>Configuration centralisée</strong> : categories.json pour gérer tout le contenu</li>
                            <li>🎨 <strong>Layout desktop optimisé</strong> : grille 3 colonnes pour une meilleure organisation</li>
                            <li>🔄 <strong>Système de retry intelligent</strong> : gestion des erreurs et performance optimisée</li>
                            <li>🎭 <strong>Icônes complètes</strong> : toutes les catégories ont leurs émojis</li>
                            <li>✨ <strong>Effets visuels améliorés</strong> : animations et transitions plus fluides</li>
                            <li>🎪 <strong>Interface responsive</strong> : adaptation parfaite mobile/desktop</li>
                        </ul>
                    </div>
                    
                    <div class="changelog-day">
                        <div class="day-header">
                            <span class="day-date">🗓️ Versions antérieures</span>
                        </div>
                        <ul class="changelog-list">
                            <li>🎯 <strong>Jeu du Pendu complet</strong> : 20 catégories, 750+ mots, système de stats</li>
                            <li>🏆 <strong>10 Succès débloquables</strong> : conditions variées (séries, catégories spécialisées, perfectionniste...)</li>
                            <li>📊 <strong>Statistiques détaillées</strong> : suivi complet avec persistance localStorage</li>
                            <li>🎨 <strong>Interface moderne</strong> : design glassmorphism avec effets et animations</li>
                            <li>📱 <strong>Menu hamburger responsive</strong> : navigation adaptée mobile/desktop</li>
                            <li>🔥 <strong>Système de streak</strong> : compteur de séries avec meilleur score</li>
                            <li>🎪 <strong>Catégories variées</strong> : Animaux, Disney, Séries TV, Jeux Vidéo, Cuisine...</li>
                            <li>💾 <strong>Données persistantes</strong> : progression sauvegardée automatiquement</li>
                        </ul>
                    </div>
                </div>
                
                <div class="changelog-actions">
                    <button class="btn btn-secondary" id="backToMenuFromChangelogBtn">🏠 Retour au menu</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Vue Paramètres -->
    <div class="view" id="settingsView">
        <div class="container">
            <div class="settings-content">
                <h2>⚙️ Paramètres</h2>
                
                <!-- Section Niveaux -->
                <div class="settings-section" id="levelSettingsContainer">
                    <!-- Le contenu sera généré dynamiquement par LevelManager -->
                </div>
                
                <!-- Section Difficulté -->
                <div class="settings-section">
                    <h3>🎯 Options de difficulté</h3>
                    <div class="settings-grid">
                        <div class="setting-card">
                            <div class="setting-header">
                                <h4>📝 Accents requis</h4>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="accentDifficulty">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                Les lettres accentuées (É, È, À, Ç...) doivent être devinées et ne sont plus révélées automatiquement.
                            </p>
                        </div>
                        
                        <div class="setting-card">
                            <div class="setting-header">
                                <h4>🔢 Chiffres cachés</h4>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="numberDifficulty">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                Les chiffres (0-9) doivent être devinés et ne sont plus révélés automatiquement.
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Section Catégories -->
                <div class="settings-section">
                    <h3>📂 Catégories de mots</h3>
                    <div class="categories-controls">
                        <button class="btn btn-small" id="selectAllCategoriesBtn">✅ Tout sélectionner</button>
                        <button class="btn btn-small" id="deselectAllCategoriesBtn">❌ Tout désélectionner</button>
                    </div>
                    <div class="categories-grid" id="settingsCategoriesGrid">
                        <!-- Les catégories seront générées dynamiquement -->
                    </div>
                </div>
                
                <div class="settings-actions">
                    <button class="btn btn-secondary" id="resetSettingsBtn">🔄 Réinitialiser</button>
                    <button class="btn btn-secondary" id="backToMenuFromSettingsBtn">🏠 Retour au menu</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JavaScript modulaire -->
    <script src="js/dom-manager.js"></script>
    <script src="js/difficulty-manager.js"></script>
    <script src="js/level-manager.js"></script>
    <script src="js/word-utils.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/virtual-keyboard.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/orientation-manager.js"></script>
    <script src="js/fullscreen-manager.js"></script>
    <!-- Modes de jeu modulaires (ordre de dépendance CRITIQUE) -->
    <script src="js/base-game-mode.js"></script>
    <script src="js/save-game-manager.js"></script>
    <script src="js/base-game-mode-with-save.js"></script>
    <script src="js/standard-mode.js"></script>
    <script src="js/timeattack-mode.js"></script>
    <script src="js/category-mode.js"></script>
    <script src="js/game-modes.js"></script>
    <script src="js/game-engine.js"></script>
    <script src="js/game-manager.js"></script>
    <script src="js/modal-manager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>